(function(){"use strict";var __webpack_modules__={5054:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__.Z={props:{visible:{type:Boolean,default:!1},produit:{type:Object,default:null}},data(){return{payee:0,achat:{},logs:""}},methods:{close(){this.$emit("close")},acheter(){let data={produit:this.produit.id,quantite:eval(this.achat.quantite)*this.produit.rapport,prix:eval(this.achat.prix)};axios__WEBPACK_IMPORTED_MODULE_0___default().post(this.$store.state.host+"/achat/",data,this.headers).then((e=>{this.produit.quantite+=e.data.quantite,this.close()})).catch((e=>{e.response?this.logs=e.response.data.status:this.logs="une erreur est survenue"}))}}}},1021:function(e,t,s){var a=s(9963),n=s(6252);const r=(0,n._)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1),o={key:0},i={key:1};function l(e,t,s,a,l,d){const c=(0,n.up)("TopBar"),u=(0,n.up)("router-view"),_=(0,n.up)("Invoice"),h=(0,n.up)("AppLogin");return(0,n.wg)(),(0,n.iD)("div",null,[r,null!=l.user?((0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(c,{user:l.user,class:"nonprintable"},null,8,["user"]),(0,n.Wm)(u),(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>d.logout&&d.logout(...e)),class:"logout nonprintable"}," logout "),(0,n.Wm)(_)])):((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(h,{onConnected:d.logIn},null,8,["onConnected"])]))])}var d=s(9669),c=s.n(d),u=s(3577);const _=e=>((0,n.dD)("data-v-e9822dd2"),e=e(),(0,n.Cn)(),e),h={class:"centered"},p={action:".",method:"post"},m=_((()=>(0,n._)("h1",null,"WELCOME BACK",-1))),v={class:"field"},b=_((()=>(0,n._)("label",{for:"id_username"},"Username :",-1))),g={class:"field"},f=_((()=>(0,n._)("label",{for:"id_password"},"Password :",-1))),w={key:0,for:"id_password",style:{color:"red"}},y={class:"btns"};function k(e,t,s,r,o,i){return(0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("form",p,[m,(0,n._)("div",v,[b,(0,n.wy)((0,n._)("input",{type:"text",name:"username",placeholder:"Username ",required:"",id:"id_username","onUpdate:modelValue":t[0]||(t[0]=e=>o.username=e),autocomplete:"on"},null,512),[[a.nr,o.username]])]),(0,n._)("div",g,[f,(0,n.wy)((0,n._)("input",{type:"password",name:"password",placeholder:"Password ",required:"",id:"id_password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),autocomplete:"on"},null,512),[[a.nr,o.password]])]),o.error.length>0?((0,n.wg)(),(0,n.iD)("label",w,(0,u.zw)(o.error),1)):(0,n.kq)("",!0),(0,n._)("div",y,[(0,n._)("button",{onClick:t[2]||(t[2]=(0,a.iM)(((...e)=>i.logIn&&i.logIn(...e)),["prevent"]))},"Log In")])])])}var C={data(){return{username:"",password:"",user:null,error:""}},methods:{logIn(){this.error="",c().post(this.$store.state.host+"/login/",{username:this.username,password:this.password}).then((e=>{this.user=e.data,null!=this.user&&this.user.access.length>20?(this.$store.state.user=this.user,this.$emit("connected",this.user)):this.error="nom d'utilisateur ou mot de passe incorrect"})).catch((e=>{this.error="erreur de connectivité",console.error(e)}))}}},D=s(3744);const $=(0,D.Z)(C,[["render",k],["__scopeId","data-v-e9822dd2"]]);var x=$;const q=e=>((0,n.dD)("data-v-ee8ac5cc"),e=e(),(0,n.Cn)(),e),S={class:"parent"},z={class:"toggle-submenu"},I={class:"toggle-submenu"},O={class:"submenu"},U=q((()=>(0,n._)("a",{href:"/admin/",target:"_blank"},"Administration",-1)));function M(e,t,s,a,r,o){const i=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",S,[(0,n._)("ul",null,[(0,n._)("li",z,[(0,n.Wm)(i,{to:{name:"tables"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Tables")])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(i,{to:"/commandes"},{default:(0,n.w5)((()=>[(0,n.Uk)("Commandes")])),_:1})]),(0,n._)("li",I,[(0,n.Wm)(i,{to:"/stock"},{default:(0,n.w5)((()=>[(0,n.Uk)("Stock")])),_:1})]),s.user.is_admin?((0,n.wg)(),(0,n.iD)("li",{key:0,onMouseenter:t[0]||(t[0]=e=>o.showSubmenu(e)),onMouseleave:t[1]||(t[1]=e=>o.hideSubmenu(e))},[(0,n.Wm)(i,{to:""},{default:(0,n.w5)((()=>[(0,n.Uk)("Autres")])),_:1}),(0,n._)("div",O,[(0,n.Wm)(i,{to:"stat_menu"},{default:(0,n.w5)((()=>[(0,n.Uk)("Stats Recettes")])),_:1}),(0,n.Wm)(i,{to:"stat_service"},{default:(0,n.w5)((()=>[(0,n.Uk)("Stats Service")])),_:1}),U])],32)):(0,n.kq)("",!0)])])}var j={props:{user:{type:Object,required:!0}},methods:{showSubmenu(e){let t=e.target.getElementsByClassName("submenu")[0];t.style.display="block"},hideSubmenu(e){let t=e.target.getElementsByClassName("submenu")[0];t.style.display="none"}}};const B=(0,D.Z)(j,[["render",M],["__scopeId","data-v-ee8ac5cc"]]);var T=B;const W=e=>((0,n.dD)("data-v-499ea84f"),e=e(),(0,n.Cn)(),e),A={class:"printable invoice"},E=W((()=>(0,n._)("img",{width:"100",src:"/static/logo.png",style:{display:"block"}},null,-1))),P={key:0},L=W((()=>(0,n._)("br",null,null,-1))),Z=W((()=>(0,n._)("div",{style:{"text-align":"left",display:"inline-block"}},[(0,n.Uk)(" RC 35469/22"),(0,n._)("br"),(0,n.Uk)(" NIF 4001909714 ")],-1))),V=W((()=>(0,n._)("div",null,[(0,n.Uk)(" Tel: 68 13 22 39"),(0,n._)("br"),(0,n.Uk)(" MIAMI BEACH"),(0,n._)("br"),(0,n.Uk)(" Bujumbura, KAJAGA ")],-1))),N={key:1},R={style:{width:"100%"}},F=W((()=>(0,n._)("thead",null,[(0,n._)("tr",{style:{"border-bottom":"1px solid #aaa","text-align":"left"}},[(0,n._)("th",null,"Article"),(0,n._)("th",{style:{}},"P.U."),(0,n._)("th",null,"Qt."),(0,n._)("th",{style:{"text-align":"right"}},"Total")])],-1))),K={key:0},Q={style:{"text-align":"left"}},Y={style:{"text-align":"right"}},H={style:{"border-top":"1px solid #aaa","text-align":"left"}},J=W((()=>(0,n._)("th",{colspan:"3"},"Total",-1))),X={style:{"text-align":"right"}},G={key:0,style:{margin:"10px"}},ee={key:1,style:{margin:"10px"}},te=W((()=>(0,n._)("strong",null,"Murakoze, Merci, Thank you!",-1)));function se(e,t,s,a,r,o){const i=(0,n.up)("center");return(0,n.wg)(),(0,n.iD)("div",A,[(0,n.Wm)(i,{class:"header"},{default:(0,n.w5)((()=>[E,r.commande?((0,n.wg)(),(0,n.iD)("div",P,[(0,n.Uk)(" Facture no. "+(0,u.zw)(r.commande.id)+" du "+(0,u.zw)(e.datetime(r.commande.date)),1),L])):(0,n.kq)("",!0),Z,V,r.commande?((0,n.wg)(),(0,n.iD)("div",N,[(0,n._)("b",null,(0,u.zw)(r.commande.client),1)])):(0,n.kq)("",!0)])),_:1}),(0,n._)("table",R,[F,r.commande?((0,n.wg)(),(0,n.iD)("tbody",K,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.commande.details,(e=>((0,n.wg)(),(0,n.iD)("tr",Q,[(0,n._)("td",null,(0,u.zw)(e.nom),1),(0,n._)("td",null,(0,u.zw)(e.prix)+" Fbu",1),(0,n._)("td",null,"x "+(0,u.zw)(e.quantite),1),(0,n._)("td",Y,(0,u.zw)(e.somme)+" Fbu",1)])))),256)),(0,n._)("tr",H,[J,(0,n._)("th",X,[(0,n._)("b",null,(0,u.zw)(r.commande.a_payer)+" Fbu",1)])])])):(0,n.kq)("",!0)]),r.commande?((0,n.wg)(),(0,n.iD)("div",G," Serveur: "+(0,u.zw)(r.commande.serveur||""),1)):(0,n.kq)("",!0),r.commande?((0,n.wg)(),(0,n.iD)("div",ee," Caissier: "+(0,u.zw)(r.commande.user||""),1)):(0,n.kq)("",!0),(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[te])),_:1})])}var ae={data(){return{commande:this.$store.state.commande}},watch:{"$store.state.commande":{deep:!0,handler(e){console.log("something changed"),this.commande=this.$store.state.commande}}}};const ne=(0,D.Z)(ae,[["render",se],["__scopeId","data-v-499ea84f"]]);var re=ne,oe={name:"app",components:{AppLogin:x,TopBar:T,Invoice:re},data(){return{user:this.$store.state.user}},computed:{host(){return this.$store.state.host}},created(){var e=JSON.parse(localStorage.getItem("user")),t=JSON.parse(localStorage.getItem("selected_table")),s=JSON.parse(localStorage.getItem("selected_serveur"));e?(this.$store.state.user=e,this.$store.state.selected_table=t,this.$store.state.selected_serveur=s):console.warn("il y'a pas de session")},watch:{"$store.state.user":{deep:!0,handler(e){localStorage.setItem("user",JSON.stringify(e)),this.user=e}},"$store.state.selected_table":{deep:!0,handler(e){localStorage.setItem("selected_table",JSON.stringify(e)),this.selected_table=e}},"$store.state.selected_serveur":{deep:!0,handler(e){localStorage.setItem("selected_serveur",JSON.stringify(e)),this.selected_serveur=e}}},methods:{logIn(e){null!=e&&e.access.length>20&&(this.user=e)},logout(){localStorage.setItem("user",null),this.$store.state.user=null,this.$store.state.serveurs=null,this.$store.state.recettes=null,this.$store.state.tables=null,this.user=null}}};const ie=(0,D.Z)(oe,[["render",l]]);var le=ie,de=s(2201);const ce={id:"app",class:"nonprintable"},ue={class:"recycler"},_e={class:"table_size"};function he(e,t,s,a,r,o){const i=(0,n.up)("search-bar"),l=(0,n.up)("TableItem"),d=(0,n.up)("TableDialog");return(0,n.wg)(),(0,n.iD)("div",ce,[(0,n.Wm)(i,{onChanged:o.search},null,8,["onChanged"]),(0,n._)("div",ue,[(0,n._)("div",_e,[(0,n._)("button",{class:"big",onClick:t[0]||(t[0]=e=>{r.dialog_shown=!0,r.table=null})},"+")]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.tables,(e=>((0,n.wg)(),(0,n.j4)(l,{table:e,onEdit:o.editTable,key:e.id},null,8,["table","onEdit"])))),128))]),(0,n.Wm)(d,{table:r.table,visible:r.dialog_shown,onClose:t[1]||(t[1]=e=>r.dialog_shown=!1)},null,8,["table","visible"])])}s(7658);function pe(e,t,s,r,o,i){const l=(0,n.up)("center");return(0,n.wg)(),(0,n.j4)(l,null,{default:(0,n.w5)((()=>[(0,n._)("form",null,[(0,n.wy)((0,n._)("input",{type:"text",placeholder:"Keyword",id:"id_username","onUpdate:modelValue":t[0]||(t[0]=e=>o.keyword=e),autofocus:""},null,512),[[a.nr,o.keyword]]),(0,n._)("button",{type:"reset",onClick:t[1]||(t[1]=e=>o.keyword="")},"X")])])),_:1})}var me={data(){return{keyword:""}},watch:{keyword(e){this.$emit("changed",e)}}};const ve=(0,D.Z)(me,[["render",pe]]);var be=ve;const ge=e=>((0,n.dD)("data-v-3da0b0d9"),e=e(),(0,n.Cn)(),e),fe={class:"title"},we={class:"buttons"},ye=ge((()=>(0,n._)("div",null,null,-1)));function ke(e,t,s,r,o,i){return(0,n.wg)(),(0,n.iD)("div",{class:"parent",onClick:t[1]||(t[1]=(...e)=>i.gotoServeurs&&i.gotoServeurs(...e))},[(0,n._)("div",fe,(0,u.zw)(s.table.nom)+" "+(0,u.zw)(s.table.number),1),(0,n._)("div",we,[(0,n._)("button",{onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>i.edit&&i.edit(...e)),["stop"]))}," modifier "),ye])])}var Ce={props:{table:{type:Object,required:!0}},methods:{gotoServeurs(){this.$store.state.selected_table=this.table,this.$router.push("serveurs")},edit(){this.$emit("edit",this.table)}}};const De=(0,D.Z)(Ce,[["render",ke],["__scopeId","data-v-3da0b0d9"]]);var $e=De;const xe=e=>((0,n.dD)("data-v-f6b94c2c"),e=e(),(0,n.Cn)(),e),qe=xe((()=>(0,n._)("h3",null,"Table",-1))),Se={method:"post"},ze={class:"field"},Ie=xe((()=>(0,n._)("label",{for:"id_nom"},"Nom ou Place:",-1))),Oe={class:"field"},Ue=xe((()=>(0,n._)("label",{for:"id_number"},"Numéro:",-1))),Me={class:"submit"},je={class:"logs"};function Be(e,t,s,r,o,i){const l=(0,n.up)("center");return(0,n.wg)(),(0,n.iD)("div",{class:(0,u.C_)({popup:!0,active:s.visible})},[(0,n._)("div",{class:"popup-body",onClick:t[4]||(t[4]=(0,a.iM)((()=>{}),["prevent","stop"]))},[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[qe,(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),class:"close"},"×")])),_:1}),(0,n._)("form",Se,[(0,n._)("div",ze,[Ie,(0,n.wy)((0,n._)("input",{type:"text",placeholder:"nom",id:"id_nom","onUpdate:modelValue":t[1]||(t[1]=e=>o.nom=e)},null,512),[[a.nr,o.nom]])]),(0,n._)("div",Oe,[Ue,(0,n.wy)((0,n._)("input",{type:"number",placeholder:"numero de la table",id:"id_number","onUpdate:modelValue":t[2]||(t[2]=e=>o.number=e)},null,512),[[a.nr,o.number]])]),(0,n._)("div",Me,[(0,n._)("div",je,(0,u.zw)(o.logs),1),(0,n._)("input",{type:"submit",value:"Envoyer",onClick:t[3]||(t[3]=(...e)=>i.submit&&i.submit(...e))})])])])],2)}var Te={props:{visible:{type:Boolean,default:!1},table:{type:Object,default:null}},data(){return{logs:"",nom:"",number:""}},computed:{host(){return this.$store.state.host}},watch:{table(e){if(!e)return this.nom="",void(this.number="");this.nom=e.nom,this.number=e.number}},methods:{close(){this.$emit("close")},submit(){this.table?this.editTable():this.addTable()},editTable(){let e={headers:{Authorization:"Bearer "+this.$store.state.user.access}},t={nom:this.nom,number:this.number};c().put(this.host+`/table/${this.table.id}/`,t,e).then((e=>{this.table.nom=e.data.nom,this.table.number=e.data.number,this.close()})).catch((e=>{e.response?this.logs=e.response.data.status:this.logs="une erreur est survenue"}))},addTable(){let e={headers:{Authorization:"Bearer "+this.$store.state.user.access}},t={nom:this.nom,number:this.number};c().post(this.host+"/table/",t,e).then((e=>{this.$store.state.tables.unshift(e.data),this.close()})).catch((e=>{e.response?this.logs=e.response.data.status:this.logs="une erreur est survenue"}))}}};const We=(0,D.Z)(Te,[["render",Be],["__scopeId","data-v-f6b94c2c"]]);var Ae=We,Ee={components:{SearchBar:be,TableItem:$e,TableDialog:Ae},data(){return{tables:this.$store.state.tables,dialog_shown:!1,table:null}},watch:{"$store.state.tables"(e){this.tables=e}},methods:{search(e){if(""!=e){this.tables=[];for(var t=0;t<this.$store.state.tables.length;t++){let s=this.$store.state.tables[t];(s.nom.includes(e)||s.number==e)&&this.tables.push(s)}}else this.tables=this.$store.state.tables},editTable(e){this.table=e,this.dialog_shown=!0},fetchData(){axios.get(this.host+"/table/",this.headers).then((e=>{this.$store.state.tables=e.data})).catch((e=>{this.displayErrorOrRefreshToken(e,this.fetchData)}))}},mounted(){this.fetchData()}};const Pe=(0,D.Z)(Ee,[["render",he],["__scopeId","data-v-23a5c402"]]);var Le=Pe;const Ze=(0,n._)("div",{class:""},"modifier",-1),Ve={class:"recycler"},Ne={class:"serveur_size"};function Re(e,t,s,r,o,i){const l=(0,n.up)("SearchBar"),d=(0,n.up)("ItemServeur"),c=(0,n.up)("DialogServeur");return(0,n.wg)(),(0,n.iD)("div",{onClick:t[3]||(t[3]=e=>i.hideEverything()),class:"nonprintable"},[(0,n.Wm)(l,{onChanged:i.search},null,8,["onChanged"]),(0,n._)("div",{class:(0,u.C_)(["context",{visible:o.context_shown}]),ref:"context",style:{display:"none"}},[i.serveurActif?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"",onClick:t[0]||(t[0]=(...e)=>i.changeStatus&&i.changeStatus(...e))},"desactiver")):((0,n.wg)(),(0,n.iD)("div",{key:1,class:"",onClick:t[1]||(t[1]=(...e)=>i.changeStatus&&i.changeStatus(...e))},"activer")),Ze],2),(0,n._)("div",Ve,[(0,n._)("div",Ne,[(0,n._)("button",{class:"big",onClick:t[2]||(t[2]=(0,a.iM)((e=>o.dialog_shown=!0),["stop"]))}," + ")]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.serveurs,(t=>((0,n.wg)(),(0,n.j4)(d,{serveur:t,key:t.id,id_table:e.$route.params.id_table,onContextmenu:(0,a.iM)((e=>i.showContext(e,t)),["prevent"])},null,8,["serveur","id_table","onContextmenu"])))),128))]),(0,n.Wm)(c,{visible:o.dialog_shown,onClose:i.hideEverything,serveur:o.serveur},null,8,["visible","onClose","serveur"])])}const Fe={class:"img-user"},Ke=["src"],Qe={class:"username"};function Ye(e,t,s,a,r,o){return(0,n.wg)(),(0,n.iD)("div",{class:(0,u.C_)(["user-card",{disabled:!s.serveur.is_active}]),onClick:t[0]||(t[0]=(...e)=>o.gotoMenus&&o.gotoMenus(...e))},[(0,n._)("div",Fe,[(0,n._)("img",{src:o.getAvatar(s.serveur),alt:""},null,8,Ke)]),(0,n._)("div",Qe,[(0,n._)("div",null,[(0,n._)("h3",null,(0,u.zw)(s.serveur.tel),1)]),(0,n._)("div",null,(0,u.zw)(s.serveur.firstname)+" "+(0,u.zw)(s.serveur.lastname),1)])],2)}var He={props:{serveur:{type:Object,required:!0}},methods:{getAvatar(e){return null==e.avatar?"/img/ic_user.png":e.avatar},gotoMenus(){this.serveur.is_active&&(this.$store.state.selected_serveur=this.serveur,this.$router.push("menus"))}}};const Je=(0,D.Z)(He,[["render",Ye],["__scopeId","data-v-5cde4919"]]);var Xe=Je;const Ge=e=>((0,n.dD)("data-v-30218680"),e=e(),(0,n.Cn)(),e),et=Ge((()=>(0,n._)("h3",null,"Serveur",-1))),tt={method:"post"},st={class:"field"},at=Ge((()=>(0,n._)("label",{for:"id_firstname"},"Prenom:",-1))),nt={class:"field"},rt=Ge((()=>(0,n._)("label",{for:"id_lastname"},"Nom:",-1))),ot={class:"field"},it=Ge((()=>(0,n._)("label",{for:"id_avatar"},"photo de profile:",-1))),lt={class:"field"},dt=Ge((()=>(0,n._)("label",{for:"id_tel"},"Télephone:",-1))),ct={class:"submit"},ut={class:"logs"};function _t(e,t,s,r,o,i){const l=(0,n.up)("center");return(0,n.wg)(),(0,n.iD)("div",{class:(0,u.C_)({popup:!0,active:s.visible})},[(0,n._)("div",{class:"popup-body",onClick:t[6]||(t[6]=(0,a.iM)((()=>{}),["stop"]))},[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[et,(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),class:"close"},"×")])),_:1}),(0,n._)("form",tt,[(0,n._)("div",st,[at,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.new_serveur.firstname=e),placeholder:"firstname",id:"id_firstname"},null,512),[[a.nr,o.new_serveur.firstname]])]),(0,n._)("div",nt,[rt,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>o.new_serveur.lastname=e),placeholder:"lastname",id:"id_lastname"},null,512),[[a.nr,o.new_serveur.lastname]])]),(0,n._)("div",ot,[it,(0,n._)("input",{type:"file",onChange:t[3]||(t[3]=(...e)=>i.chargerPhoto&&i.chargerPhoto(...e)),name:"avatar",id:"id_avatar",accept:".jpg,.jpeg,.png,.gif",ref:"avatar"},null,544)]),(0,n._)("div",lt,[dt,(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>o.new_serveur.tel=e),placeholder:"tel",id:"id_tel"},null,512),[[a.nr,o.new_serveur.tel]])]),(0,n._)("div",ct,[(0,n._)("div",ut,(0,u.zw)(o.logs),1),(0,n._)("input",{type:"submit",value:"Envoyer",onClick:t[5]||(t[5]=(0,a.iM)(((...e)=>i.submit&&i.submit(...e)),["prevent"]))})])])])],2)}var ht={props:{visible:{type:Boolean,default:!1},serveur:{type:Object,default:null}},computed:{host(){return this.$store.state.host}},watch:{serveur(e){this.new_serveur=e||{}}},data(){return{logs:"",avatar:null,new_serveur:{}}},methods:{close(){this.$emit("close")},chargerPhoto(e){this.avatar=this.$refs.avatar.files[0]},submit(){this.serveur?this.updateServeur():this.addServeur()},updateServeur(){},addServeur(){let e={headers:{Authorization:"Bearer "+this.$store.state.user.access,"Content-Type":"multipart/form-data"}},t=new FormData;this.avatar&&t.append("avatar",this.avatar),t.append("firstname",this.new_serveur.firstname),t.append("lastname",this.new_serveur.lastname),t.append("tel",this.new_serveur.tel),c().post(this.host+"/serveur/",t,e).then((e=>{this.$store.state.serveurs.push(e.data),this.close()})).catch((e=>{console.error(e)}))}}};const pt=(0,D.Z)(ht,[["render",_t],["__scopeId","data-v-30218680"]]);var mt=pt,vt={components:{SearchBar:be,ItemServeur:Xe,DialogServeur:mt},data(){return{serveurs:this.$store.state.serveurs,dialog_shown:!1,serveur:null,context_shown:!1}},computed:{serveurActif(){return!!this.serveur&&this.serveur.is_active}},watch:{"$store.state.serveurs"(e){this.serveurs=e}},methods:{search(e){this.serveurs=[];for(var t=0;t<this.$store.state.serveurs.length;t++){let a=this.$store.state.serveurs[t];for(let t in a){var s=String(a[t]).toLowerCase();if(s.search(e.toLowerCase())>=0){this.serveurs.push(a);break}}}},hideEverything(){this.serveur=null,this.dialog_shown=!1,this.context_shown=!1,this.menu=!1},showContext(e,t){this.context_shown=!0;let s=this.$refs.context;s.style.left=e.clientX+"px",s.style.top=e.clientY+"px",this.serveur=t},changeStatus(){this.serveur.is_active=!this.serveur.is_active},fetchData(){axios.get(this.host+"/serveur/",this.headers).then((e=>{this.$store.state.serveurs=e.data})).catch((e=>{console.error(e)}))}},mounted(){this.fetchData()}};const bt=(0,D.Z)(vt,[["render",Re]]);var gt=bt;const ft=e=>((0,n.dD)("data-v-0a0d798c"),e=e(),(0,n.Cn)(),e),wt=ft((()=>(0,n._)("div",{class:""},"modifier",-1))),yt={class:"recycler"},kt={class:"recette_size"};function Ct(e,t,s,r,o,i){const l=(0,n.up)("search-bar"),d=(0,n.up)("RestoMenu"),c=(0,n.up)("CartDialog"),_=(0,n.up)("MenuDialog");return(0,n.wg)(),(0,n.iD)("div",{id:"app",class:"nonprintable",onClick:t[4]||(t[4]=e=>i.hideEverything())},[(0,n._)("div",{class:(0,u.C_)(["context",{visible:o.context_shown}]),ref:"context",style:{display:"none"}},[i.menuActive?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"",onClick:t[0]||(t[0]=(...e)=>i.disableMenu&&i.disableMenu(...e))},"desactiver")):((0,n.wg)(),(0,n.iD)("div",{key:1,class:"",onClick:t[1]||(t[1]=(...e)=>i.disableMenu&&i.disableMenu(...e))},"activer")),wt],2),(0,n.Wm)(l,{onChanged:i.search},null,8,["onChanged"]),(0,n._)("div",yt,[(0,n._)("div",kt,[(0,n._)("button",{class:"big",onClick:t[2]||(t[2]=(0,a.iM)((e=>o.menu_opened=!0),["stop"]))}," + ")]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.recettes,(e=>((0,n.wg)(),(0,n.j4)(d,{recette:e,key:e.id,onContextmenu:(0,a.iM)((t=>i.showContext(t,e)),["prevent"])},null,8,["recette","onContextmenu"])))),128))]),(0,n._)("button",{class:"btn-panier",href:"#",id:"toggle-panier",onClick:t[3]||(t[3]=(0,a.iM)((e=>o.panier_opened=!0),["prevent","stop"]))}," panier ("+(0,u.zw)(o.cart.getLength())+") ",1),(0,n.Wm)(c,{visible:o.panier_opened,cart:o.cart,onClose:i.hideEverything},null,8,["visible","cart","onClose"]),(0,n.Wm)(_,{visible:o.menu_opened,cart:o.cart,onClose:i.hideEverything},null,8,["visible","cart","onClose"])])}const Dt=["data-id"],$t={class:"img food-img"},xt=["src"],qt={class:"title"},St={class:"prix"},zt={class:"buttons"},It={class:"noir-blanc recette_qtt"};function Ot(e,t,s,a,r,o){return(0,n.wg)(),(0,n.iD)("div",{class:(0,u.C_)(["parent",{disabled:!s.recette.is_active}]),"data-id":s.recette.id},[(0,n._)("div",$t,[(0,n._)("img",{src:o.getIcon(s.recette)},null,8,xt)]),(0,n._)("div",qt,[(0,n.Uk)((0,u.zw)(s.recette.nom)+" ",1),(0,n._)("span",St,(0,u.zw)(e.money(s.recette.prix))+"FBu",1)]),(0,n._)("div",zt,[(0,n._)("button",{class:"left-button bg-blue recette_moins",onClick:t[0]||(t[0]=(...e)=>o.decreaseQtt&&o.decreaseQtt(...e))},"-"),(0,n._)("label",It,(0,u.zw)(o.quantite),1),(0,n._)("button",{class:"right-button bg-blue recette_plus",onClick:t[1]||(t[1]=(...e)=>o.increaseQtt&&o.increaseQtt(...e))},"+")])],10,Dt)}var Ut={props:{recette:{type:Object,required:!0}},data:function(){return{cart:this.$store.state.cart}},computed:{quantite(){return this.cart.getQuantite(this.recette.id)}},methods:{getIcon(e){return null==e.image?"/static/logo.png":e.image},increaseQtt:function(){this.recette.is_active&&this.cart.add(this.recette)},decreaseQtt:function(){this.recette.is_active&&this.cart.decrease(this.recette.id)}}};const Mt=(0,D.Z)(Ut,[["render",Ot],["__scopeId","data-v-a6dd8be4"]]);var jt=Mt;const Bt=e=>((0,n.dD)("data-v-7f99165b"),e=e(),(0,n.Cn)(),e),Tt={class:"table panier"},Wt=Bt((()=>(0,n._)("caption",{class:"title"},"Panier",-1))),At=Bt((()=>(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Name"),(0,n._)("th",null,"price"),(0,n._)("th",null,"quantity"),(0,n._)("th",null,"total"),(0,n._)("th"),(0,n._)("th")])],-1))),Et={class:".popup-content"},Pt=["onClick"],Lt=["onClick"],Zt=Bt((()=>(0,n._)("td",null,"total",-1))),Vt=Bt((()=>(0,n._)("td",null,null,-1))),Nt=Bt((()=>(0,n._)("td",null,null,-1))),Rt=Bt((()=>(0,n._)("td",null,null,-1))),Ft=Bt((()=>(0,n._)("td",null,null,-1))),Kt={key:0,style:{color:"red"}},Qt={class:"btns"};function Yt(e,t,s,r,o,i){return(0,n.wg)(),(0,n.iD)("div",{id:"panier",class:(0,u.C_)({popup:!0,active:s.visible})},[(0,n._)("div",{class:"popup-body",onClick:t[2]||(t[2]=(0,a.iM)((()=>{}),["prevent","stop"]))},[(0,n._)("table",Tt,[Wt,(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),class:"close"},"×"),At,(0,n._)("tbody",Et,[e.item.quantite>0?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(o.cart.content,(t=>((0,n.wg)(),(0,n.iD)("tr",null,[(0,n._)("td",null,(0,u.zw)(t.recette.nom),1),(0,n._)("td",null,(0,u.zw)(t.recette.prix),1),(0,n._)("td",null,"x "+(0,u.zw)(t.quantite),1),(0,n._)("td",null,(0,u.zw)(e.money(t.getTotal())),1),(0,n._)("td",null,[(0,n._)("button",{class:"panier_moins",onClick:e=>i.decreaseQtt(t)},"-",8,Pt)]),(0,n._)("td",null,[(0,n._)("button",{class:"panier_plus",onClick:e=>i.increaseQtt(t)},"+",8,Lt)])])))),256)):(0,n.kq)("",!0)]),(0,n._)("tfoot",null,[(0,n._)("tr",null,[Zt,Vt,Nt,(0,n._)("td",null,(0,u.zw)(e.money(o.cart.getTotal())),1),Rt,Ft])])]),o.logs?((0,n.wg)(),(0,n.iD)("label",Kt,(0,u.zw)(o.logs),1)):(0,n.kq)("",!0),(0,n._)("div",Qt,[(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>i.validerCommande&&i.validerCommande(...e))},"Vendre")])])],2)}var Ht={props:{visible:{type:Boolean,default:!1}},data(){return{cart:this.$store.state.cart,logs:"",dette_enabled:!1,client:{}}},methods:{close(){this.$emit("close")},increaseQtt:function(e){this.cart.add(e.recette)},decreaseQtt:function(e){this.cart.decrease(e.recette.id)},validerCommande(){let e={headers:{Authorization:"Bearer "+this.$store.state.user.access}},t={table:this.$store.state.selected_table.id,serveur:this.$store.state.selected_serveur.id,items:[],reste:this.cart.getTotal(),payee:0};for(var s=0;s<this.cart.getLength();s++){let e=this.cart.content[s],a={recette:e.recette.id,quantite:e.quantite,somme:e.getTotal()};t.items.push(a)}c().post(this.$store.state.host+"/commande/",t,e).then((e=>{this.$store.state.commandes.unshift(e.data);let t=null;this.$store.state.cart.content.forEach(((e,s)=>{e.recette.produit&&(t=this.$store.state.stocks.find((t=>t.id==e.recette.produit)),t&&(t.quantite-=e.quantite),t=null)})),this.$store.state.cart.content=[],this.close()})).catch((e=>{e.response?this.logs=e.response.data.status:(console.error(e),this.logs="une erreur est survenue")}))}}};const Jt=(0,D.Z)(Ht,[["render",Yt],["__scopeId","data-v-7f99165b"]]);var Xt=Jt;const Gt=e=>((0,n.dD)("data-v-4306f5de"),e=e(),(0,n.Cn)(),e),es=Gt((()=>(0,n._)("h3",null,"Menu",-1))),ts={method:"post"},ss={class:"field"},as=Gt((()=>(0,n._)("label",{for:"id_nom"},"Nom:",-1))),ns={class:"field"},rs=Gt((()=>(0,n._)("label",{for:"id_image"},"Image:",-1))),os={class:"field"},is=Gt((()=>(0,n._)("label",{for:"id_details"},"Details:",-1))),ls={class:"field"},ds=Gt((()=>(0,n._)("label",{for:"id_prix"},"Prix:",-1))),cs={class:"submit"},us={class:"logs"};function _s(e,t,s,r,o,i){const l=(0,n.up)("center");return(0,n.wg)(),(0,n.iD)("div",{class:(0,u.C_)({popup:!0,active:s.visible})},[(0,n._)("div",{class:"popup-body",onClick:t[6]||(t[6]=(0,a.iM)((()=>{}),["stop"]))},[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[es,(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),class:"close"},"×")])),_:1}),(0,n._)("form",ts,[(0,n._)("div",ss,[as,(0,n.wy)((0,n._)("input",{type:"text",name:"nom",placeholder:"nom",id:"id_nom","onUpdate:modelValue":t[1]||(t[1]=e=>o.nom=e)},null,512),[[a.nr,o.nom]])]),(0,n._)("div",ns,[rs,(0,n._)("input",{type:"file",name:"image",ref:"photo",id:"id_image",onChange:t[2]||(t[2]=e=>i.resizeImage(e)),accept:".png,.gif,.jpeg,.jpg"},null,544)]),(0,n._)("div",os,[is,(0,n.wy)((0,n._)("textarea",{placeholder:"details",id:"id_details","onUpdate:modelValue":t[3]||(t[3]=e=>o.details=e)},null,512),[[a.nr,o.details]])]),(0,n._)("div",ls,[ds,(0,n.wy)((0,n._)("input",{type:"number",name:"prix",placeholder:"prix",id:"id_prix","onUpdate:modelValue":t[4]||(t[4]=e=>o.prix=e)},null,512),[[a.nr,o.prix]])]),(0,n._)("div",cs,[(0,n._)("div",us,(0,u.zw)(o.logs),1),(0,n._)("input",{type:"submit",value:"Envoyer",onClick:t[5]||(t[5]=(0,a.iM)(((...e)=>i.createRecette&&i.createRecette(...e)),["prevent"]))})])])])],2)}var hs={props:{visible:{type:Boolean,default:!1},recette:{type:Object,default:null}},data(){return{logs:"",nom:"",image:"",details:"",prix:""}},computed:{headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access,"Content-Type":"multipart/form-data"}}},host(){return this.$store.state.host}},methods:{close(){this.$emit("close")},resizeImage(e){let t=this.$refs.photo.files[0];this.compress(t,100,(e=>{this.image=t}))},createRecette(){let e=new FormData;e.append("nom",this.nom),e.append("image",this.image),e.append("details",this.details),e.append("prix",this.prix),c().post(this.host+"/recette/",e,this.headers).then((e=>{this.$store.state.recettes.push(e.data),this.close()})).catch((e=>{console.error(e)}))}}};const ps=(0,D.Z)(hs,[["render",_s],["__scopeId","data-v-4306f5de"]]);var ms=ps,vs={components:{searchBar:be,RestoMenu:jt,CartDialog:Xt,MenuDialog:ms},data(){return{recettes:this.$store.state.recettes,cart:this.$store.state.cart,panier_opened:!1,context_shown:!1,menu_opened:!1,menu:null}},computed:{menuActive(){return!!this.menu&&this.menu.is_active}},watch:{"$store.state.recettes"(e){this.recettes=e}},methods:{search(e){this.recettes=[];for(var t=0;t<this.$store.state.recettes.length;t++){let a=this.$store.state.recettes[t];for(let t in a){var s=String(a[t]).toLowerCase();if(s.search(e.toLowerCase())>=0){this.recettes.push(a);break}}}},showContext(e,t){this.context_shown=!0;let s=this.$refs.context;s.style.left=e.clientX+"px",s.style.top=e.clientY+"px",this.menu=t},disableMenu(e){this.menu.is_active=!this.menu.is_active},hideEverything(){this.panier_opened=!1,this.menu_opened=!1,this.context_shown=!1,this.menu=null},fetchData(){axios.get(this.host+"/recette/",this.headers).then((e=>{this.$store.state.recettes=e.data})).catch((e=>{console.error(e)}))}},mounted(){0==this.$store.state.recettes.length&&this.fetchData()}};const bs=(0,D.Z)(vs,[["render",Ct],["__scopeId","data-v-0a0d798c"]]);var gs=bs;const fs=e=>((0,n.dD)("data-v-39e3cb26"),e=e(),(0,n.Cn)(),e),ws={class:"top"},ys={class:"scrollable"},ks={class:"panier-item"},Cs=fs((()=>(0,n._)("th",{class:"right"},"somme",-1))),Ds=fs((()=>(0,n._)("th",{class:"right"},"payée",-1))),$s=fs((()=>(0,n._)("th",{class:"right"},"Reste",-1))),xs=fs((()=>(0,n._)("label",{for:"dis_payed",style:{"margin-left":"5px"}},"voir les payées",-1))),qs={id:"commandes"},Ss={class:"right"},zs={class:"right"},Is={class:"right"},Os={class:"time"},Us={class:"btns"},Ms=["onClick"],js=["onClick"],Bs={class:"panier-item"},Ts=fs((()=>(0,n._)("th",{colspan:"3"},"total",-1))),Ws={class:"right"},As={class:"right"},Es={class:"right"},Ps=fs((()=>(0,n._)("th",null,null,-1))),Ls=fs((()=>(0,n._)("th",null,null,-1)));function Zs(e,t,s,r,o,i){const l=(0,n.up)("SearchBar"),d=(0,n.up)("DateFilter"),c=(0,n.up)("DetailsDialog"),_=(0,n.up)("PayDialog");return(0,n.wg)(),(0,n.iD)("div",{class:"parent nonprintable",onClick:t[7]||(t[7]=t=>e.popover_opened=!1)},[(0,n._)("div",ws,[(0,n.Wm)(l,{onChanged:i.search},null,8,["onChanged"]),(0,n.Wm)(d,{onChanged:i.filter},null,8,["onChanged"])]),(0,n._)("div",ys,[(0,n._)("table",null,[(0,n._)("thead",null,[(0,n._)("tr",ks,[(0,n._)("th",{class:(0,u.C_)({active_col:"id"==o.column}),onClick:t[0]||(t[0]=e=>o.column="id")}," id ",2),(0,n._)("th",{class:(0,u.C_)({active_col:"personnel"==o.column}),onClick:t[1]||(t[1]=e=>o.column="personnel")}," personnel ",2),(0,n._)("th",{class:(0,u.C_)({active_col:"serveur"==o.column}),onClick:t[2]||(t[2]=e=>o.column="serveur")}," serveur ",2),Cs,Ds,$s,(0,n._)("th",{class:(0,u.C_)({active_col:"date"==o.column}),onClick:t[3]||(t[3]=e=>o.column="date")}," Date ",2),(0,n._)("th",null,[(0,n.wy)((0,n._)("input",{id:"dis_payed",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>o.display_payed=e)},null,512),[[a.e8,o.display_payed]]),xs])])]),(0,n._)("tbody",qs,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.commandes,(t=>((0,n.wg)(),(0,n.iD)("tr",{class:(0,u.C_)({ideni:t.a_payer>t.payee})},[(0,n._)("td",null,"#"+(0,u.zw)(t.id),1),(0,n._)("td",null,(0,u.zw)(t.user),1),(0,n._)("td",null,(0,u.zw)(t.serveur),1),(0,n._)("td",Ss,(0,u.zw)(e.money(t.a_payer)),1),(0,n._)("td",zs,(0,u.zw)(e.money(t.payee)),1),(0,n._)("td",Is,(0,u.zw)(e.money(t.a_payer-t.payee)),1),(0,n._)("td",Os,(0,u.zw)(e.datetime(t.date)),1),(0,n._)("td",null,[(0,n._)("div",Us,[(0,n._)("button",{onClick:e=>i.showDetails(t)}," détails ",8,Ms),(0,n._)("button",{onClick:e=>i.showPay(t)}," payer ",8,js)])])],2)))),256))]),(0,n._)("tfoot",null,[(0,n._)("tr",Bs,[Ts,(0,n._)("th",Ws,(0,u.zw)(e.money(i.totals.a_payer))+" Fbu",1),(0,n._)("th",As,(0,u.zw)(e.money(i.totals.payee))+" Fbu",1),(0,n._)("th",Es,(0,u.zw)(e.money(i.totals.reste))+" Fbu",1),Ps,Ls])])])]),(0,n.Wm)(c,{visible:o.details_opened,commande:o.active_commande,onClose:t[5]||(t[5]=e=>o.details_opened=!1)},null,8,["visible","commande"]),(0,n.Wm)(_,{visible:o.pay_opened,commande:o.active_commande,onClose:t[6]||(t[6]=e=>o.pay_opened=!1)},null,8,["visible","commande"])])}const Vs=e=>((0,n.dD)("data-v-41a56eb2"),e=e(),(0,n.Cn)(),e),Ns={key:0},Rs=Vs((()=>(0,n._)("label",null,"Du:",-1))),Fs=Vs((()=>(0,n._)("label",null,"Au:",-1)));function Ks(e,t,s,r,o,i){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("button",{onClick:t[0]||(t[0]=e=>o.triggered=!o.triggered)},"Date"),o.triggered?((0,n.wg)(),(0,n.iD)("form",Ns,[Rs,(0,n.wy)((0,n._)("input",{type:"datetime-local",name:"date_du","onUpdate:modelValue":t[1]||(t[1]=e=>o.date.du=e)},null,512),[[a.nr,o.date.du]]),Fs,(0,n.wy)((0,n._)("input",{type:"datetime-local",name:"date_au","onUpdate:modelValue":t[2]||(t[2]=e=>o.date.au=e)},null,512),[[a.nr,o.date.au]]),(0,n._)("input",{type:"submit",value:"search",onClick:t[3]||(t[3]=(0,a.iM)(((...e)=>i.performSearch&&i.performSearch(...e)),["prevent","stop"])),style:{border:"1px solid black"}})])):(0,n.kq)("",!0)])}var Qs={data(){return{date:{du:null,au:null},triggered:!1}},methods:{performSearch(){this.triggered=!1,this.$emit("changed",this.date)}}};const Ys=(0,D.Z)(Qs,[["render",Ks],["__scopeId","data-v-41a56eb2"]]);var Hs=Ys;const Js={class:"table panier"},Xs={class:"title"},Gs=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Name"),(0,n._)("th",null,"price"),(0,n._)("th",null,"quantity"),(0,n._)("th",null,"total"),(0,n._)("th",null,"option")])],-1),ea={class:".popup-content"},ta={class:"money"},sa={class:"money"},aa=["onClick"],na=["value"],ra={class:"money"},oa={class:"money"},ia=(0,n._)("td",null,"total",-1),la=(0,n._)("td",null,null,-1),da=(0,n._)("td",null,null,-1),ca={class:"money"},ua={class:"btns-valider"};function _a(e,t,s,r,o,i){return(0,n.wg)(),(0,n.iD)("div",{id:"panier",class:(0,u.C_)({popup:!0,active:s.visible})},[s.commande?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"popup-body",onClick:t[6]||(t[6]=(0,a.iM)((()=>{}),["prevent","stop"]))},[(0,n._)("table",Js,[(0,n._)("caption",Xs,"Details Commande #"+(0,u.zw)(s.commande.id),1),(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),class:"close"},"×"),Gs,(0,n._)("tbody",ea,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.commande.details,(t=>((0,n.wg)(),(0,n.iD)("tr",null,[(0,n._)("td",null,(0,u.zw)(t.nom),1),(0,n._)("td",ta,(0,u.zw)(e.money(t.prix)),1),(0,n._)("td",null,"x "+(0,u.zw)(t.quantite),1),(0,n._)("td",sa,(0,u.zw)(e.money(t.somme)),1),(0,n._)("td",null,[(0,n._)("button",{style:{"background-color":"darkred"},onClick:e=>i.enlever(t)}," enlever ",8,aa)])])))),256)),(0,n._)("tr",null,[(0,n._)("td",null,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.added_menu=e)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.$store.state.recettes,(e=>((0,n.wg)(),(0,n.iD)("option",{value:e},(0,u.zw)(e.nom),9,na)))),256))],512),[[a.bM,o.added_menu]])]),(0,n._)("td",ra,(0,u.zw)(e.money(o.added_menu.prix)),1),(0,n._)("td",null,[(0,n.Uk)("x"),(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>o.added_qtt=e)},null,512),[[a.nr,o.added_qtt]])]),(0,n._)("td",oa,(0,u.zw)(e.money(o.added_menu.prix)),1),(0,n._)("td",null,[(0,n._)("button",{onClick:t[3]||(t[3]=(...e)=>i.ajouter&&i.ajouter(...e))},"ajouter")])])]),(0,n._)("tfoot",null,[(0,n._)("tr",null,[ia,la,da,(0,n._)("td",ca,(0,u.zw)(e.money(s.commande.a_payer)),1)])])]),(0,n._)("div",ua,[(0,n._)("button",{style:{"margin-right":"3px"},vid:"valider-panier",onClick:t[4]||(t[4]=(...e)=>i.supprimer&&i.supprimer(...e))}," supprimer "),(0,n._)("button",{onClick:t[5]||(t[5]=(...e)=>i.imprimer&&i.imprimer(...e))}," imprimer ")])])):(0,n.kq)("",!0)],2)}var ha={props:{visible:{type:Boolean,default:!1},commande:{type:Object,default:null}},data(){return{added_menu:{},added_qtt:1}},methods:{close(){this.$emit("close")},imprimer(){window.print()},supprimer(){confirm("Voulez-vous vraiment supprimer?")&&c()["delete"](this.host+`/commande/${this.commande.id}/`,this.headers).then((e=>{let t=-1,s=this.$store.state.commandes;for(var a=0;a<s.length;a++)if(s[a].id==this.commande.id){t=a;break}this.$store.state.commandes.splice(t,1),this.close()})).catch((e=>{console.error(e)}))},enlever(e){c().get(this.host+`/commande/${this.commande.id}/enlever/${e.id}/`,this.headers).then((e=>{for(let t of Object.keys(this.commande))this.commande[t]=e.data[t]})).catch((e=>{console.error(e)}))},ajouter(){let e={recette_id:this.added_menu.id,quantite:this.added_qtt};c().post(this.host+`/commande/${this.commande.id}/ajouter/`,e,this.headers).then((e=>{for(let t of Object.keys(this.commande))this.commande[t]=e.data[t];this.added_menu={},this.added_qtt=0})).catch((e=>{console.error(e)}))},fetchData(){c().get(this.host+"/recette/",this.headers).then((e=>{this.$store.state.recettes=e.data})).catch((e=>{console.error(e)}))}},mounted(){0==this.$store.state.recettes.length&&this.fetchData()}};const pa=(0,D.Z)(ha,[["render",_a]]);var ma=pa;const va=e=>((0,n.dD)("data-v-3647dbc0"),e=e(),(0,n.Cn)(),e),ba={method:"post"},ga={class:"field"},fa=va((()=>(0,n._)("label",null,"la somme payée :",-1))),wa={key:0},ya=(0,n.uE)('<div class="field" data-v-3647dbc0><label for="" data-v-3647dbc0>nom :</label><input type="text" name="" data-v-3647dbc0></div><div class="field" data-v-3647dbc0><label for="" data-v-3647dbc0>Telephone :</label><input type="text" name="" data-v-3647dbc0></div>',2),ka=[ya],Ca={class:"submit"},Da={class:"logs"};function $a(e,t,s,r,o,i){const l=(0,n.up)("center");return(0,n.wg)(),(0,n.iD)("div",{class:(0,u.C_)({popup:!0,active:s.visible})},[s.commande?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"popup-body",onClick:t[3]||(t[3]=(0,a.iM)((()=>{}),["prevent","stop"]))},[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[(0,n._)("h3",null,"Payment facture #"+(0,u.zw)(s.commande.id),1),(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),class:"close"},"×")])),_:1}),(0,n._)("form",ba,[(0,n._)("div",null,[(0,n.Uk)("la somme à payer est "),(0,n._)("b",null,(0,u.zw)(s.commande.a_payer),1)]),(0,n._)("div",ga,[fa,(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>o.payee=e)},null,512),[[a.nr,o.payee]])]),(0,n._)("div",null,[(0,n.Uk)("la somme à rendre est "),(0,n._)("b",null,(0,u.zw)(o.payee-s.commande.a_payer),1)]),i.dette_enabled?((0,n.wg)(),(0,n.iD)("div",wa,ka)):(0,n.kq)("",!0),(0,n._)("div",Ca,[(0,n._)("div",Da,(0,u.zw)(o.logs),1),(0,n._)("input",{type:"submit",value:"Payer",onClick:t[2]||(t[2]=(...e)=>i.performPayment&&i.performPayment(...e))})])])])):(0,n.kq)("",!0)],2)}var xa={props:{visible:{type:Boolean,default:!1},commande:{type:Object,default:null}},data(){return{logs:"",payee:0}},computed:{host(){return this.$store.state.host},dette_enabled(){return this.commande.a_payer>this.payee}},watch:{commande(e){this.payee=e.a_payer}},methods:{close(){this.$emit("close")},performPayment(){let e={headers:{Authorization:"Bearer "+this.$store.state.user.access}},t={commande:this.commande.id,somme:this.payee};c().post(this.host+"/paiement/",t,e).then((e=>{this.commande.payee+=e.data.somme,this.commande.reste-=e.data.somme,this.close()})).catch((e=>{e.response?this.logs=e.response.data.status:this.logs="une erreur est survenue"}))}}};const qa=(0,D.Z)(xa,[["render",$a],["__scopeId","data-v-3647dbc0"]]);var Sa=qa,za={components:{SearchBar:be,restoMenu:jt,DateFilter:Hs,DetailsDialog:ma,PayDialog:Sa},data(){return{details_opened:!1,pay_opened:!1,column:"",active_commande:null,display_payed:!1,temp_commands:this.$store.state.commandes}},computed:{totals(){let e={a_payer:0,payee:0,reste:0};if(0==this.commandes.length)return e;for(let t of this.commandes)e.a_payer+=t.a_payer,e.payee+=t.payee,e.reste+=t.a_payer-t.payee;return e},commandes:{get(){return this.display_payed?this.temp_commands:this.temp_commands.filter((e=>e.payee<e.a_payer))},set(e){this.temp_commands=e}}},watch:{active_commande(e){this.$store.state.commande=e}},mounted(){0==this.$store.state.commandes.length&&this.fetchData()},methods:{search(e){e=e.toLowerCase();let t="",s=null,a=this.$store.state.commandes;if(e){this.commandes=[];for(var n=0;n<a.length;n++)s=a[n],t=String(s[this.column]).toLowerCase(),"date"==this.column&&(t=this.datetime(t)),t.search(e)>=0&&this.commandes.push(s)}else this.commandes=a},showDetails(e){this.active_commande=e,this.details_opened=!0},showPay(e){this.active_commande=e,this.pay_opened=!0},filter(e){let t=new Date(e.du).toISOString(),s=new Date(e.au).toISOString();c().get(`${this.host}/commande/?date__range=${t},${s}`,this.headers).then((e=>{this.$store.state.commandes=e.data,this.commandes=e.data,this.date_du=t,this.date_au=s})).catch((e=>{console.error(e)}))},fetchData(){let e=new Date;e.setDate(e.getDate()-1);let t=e.toISOString();c().get(this.$store.state.host+`/commande/?date__gte=${t}`,this.headers).then((e=>{this.$store.state.commandes=e.data,this.commandes=e.data})).catch((e=>{console.error(e)}))}}};const Ia=(0,D.Z)(za,[["render",Zs],["__scopeId","data-v-39e3cb26"]]);var Oa=Ia;const Ua={id:"app",class:"nonprintable"},Ma={class:"recycler"},ja={class:"product_size"};function Ba(e,t,s,r,o,i){const l=(0,n.up)("SearchBar"),d=(0,n.up)("StockItem"),c=(0,n.up)("OutDialog"),u=(0,n.up)("InDialog"),_=(0,n.up)("ProductDialog");return(0,n.wg)(),(0,n.iD)("div",Ua,[(0,n.Wm)(l,{onChanged:i.search},null,8,["onChanged"]),(0,n._)("div",Ma,[(0,n._)("div",ja,[(0,n._)("button",{class:"big",onClick:t[0]||(t[0]=(0,a.iM)((e=>o.product_poped_up=!0),["stop"]))}," + ")]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.stocks,(e=>((0,n.wg)(),(0,n.j4)(d,{produit:e,key:e.id,onOut:t=>i.decreaseStock(e),onIn:t=>i.increaseStock(e)},null,8,["produit","onOut","onIn"])))),128))]),(0,n.Wm)(c,{visible:o.out_dialog_opened,produit:o.produit,onClose:i.close},null,8,["visible","produit","onClose"]),(0,n.Wm)(u,{visible:o.in_dialog_opened,produit:o.produit,onClose:i.close},null,8,["visible","produit","onClose"]),(0,n.Wm)(_,{visible:o.product_poped_up,onClose:t[1]||(t[1]=e=>o.product_poped_up=!1)},null,8,["visible"])])}const Ta={class:"parent"},Wa={class:"title"},Aa={class:"buttons"};function Ea(e,t,s,a,r,o){return(0,n.wg)(),(0,n.iD)("div",Ta,[(0,n._)("div",Wa,(0,u.zw)(s.produit.nom),1),(0,n._)("div",null,(0,u.zw)(s.produit.quantite)+" "+(0,u.zw)(s.produit.unite_sortant),1),(0,n._)("div",Aa,[(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>o.decreaseStock&&o.decreaseStock(...e))},"- Sortie"),(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>o.increaseStock&&o.increaseStock(...e))},"+ Entrée")])])}var Pa={props:{produit:{type:Object,required:!0}},methods:{decreaseStock(){this.$emit("out")},increaseStock(){this.$emit("in")}}};const La=(0,D.Z)(Pa,[["render",Ea],["__scopeId","data-v-ef245d5e"]]);var Za=La;const Va=e=>((0,n.dD)("data-v-6bfbe669"),e=e(),(0,n.Cn)(),e),Na={key:1,method:"post"},Ra={class:"field"},Fa=Va((()=>(0,n._)("label",{for:"id_quantite"},"Quantite:",-1))),Ka={class:"field"},Qa=Va((()=>(0,n._)("label",{for:"id_motif"},"Motif:",-1))),Ya=Va((()=>(0,n._)("option",{value:"vendu"},"vendu",-1))),Ha=Va((()=>(0,n._)("option",{value:"perimé"},"perimé",-1))),Ja=Va((()=>(0,n._)("option",{value:"cassé"},"cassé",-1))),Xa=[Ya,Ha,Ja],Ga={class:"submit"},en={class:"logs"};function tn(e,t,s,r,o,i){const l=(0,n.up)("center");return(0,n.wg)(),(0,n.iD)("div",{class:(0,u.C_)({popup:!0,active:s.visible})},[(0,n._)("div",{class:"popup-body",onClick:t[4]||(t[4]=(0,a.iM)((()=>{}),["prevent","stop"]))},[s.produit?((0,n.wg)(),(0,n.j4)(l,{key:0},{default:(0,n.w5)((()=>[(0,n._)("h3",null,"Diminuer "+(0,u.zw)(i.product_name),1),(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),class:"close"},"×")])),_:1})):(0,n.kq)("",!0),s.produit?((0,n.wg)(),(0,n.iD)("form",Na,[(0,n._)("div",Ra,[Fa,(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>o.quantite=e),placeholder:"quantite",id:"id_quantite",autocomplete:"off"},null,512),[[a.nr,o.quantite]])]),(0,n._)("div",Ka,[Qa,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.motif=e),placeholder:"motif ",class:"input",id:"id_motif"},Xa,512),[[a.bM,o.motif]])]),(0,n._)("div",Ga,[(0,n._)("div",en,(0,u.zw)(o.logs),1),(0,n._)("input",{type:"submit",value:"Diminuer",onClick:t[3]||(t[3]=(...e)=>i.retirer&&i.retirer(...e))})])])):(0,n.kq)("",!0)])],2)}var sn={props:{visible:{type:Boolean,default:!1},produit:{type:Object,default:null}},data(){return{payee:0,logs:"",quantite:"",motif:""}},computed:{product_name(){return this.produit.nom?this.produit.nom:""}},methods:{close(){this.$emit("close")},retirer(){let e={produit:this.produit.id,quantite:this.quantite,motif:this.motif};c().post(this.$store.state.host+"/sortie/",e,this.headers).then((e=>{this.produit.quantite-=e.data.quantite,this.close()})).catch((e=>{this.displayErrorOrRefreshToken(e,this.retirer)}))}}};const an=(0,D.Z)(sn,[["render",tn],["__scopeId","data-v-6bfbe669"]]);var nn=an;const rn=e=>((0,n.dD)("data-v-0f2113b4"),e=e(),(0,n.Cn)(),e),on={method:"post"},ln={key:0,class:"field"},dn={for:"id_quantite"},cn={key:0},un={class:"field"},_n=rn((()=>(0,n._)("label",{for:"id_prix"},"Prix d'achat:",-1))),hn={class:"submit"},pn={class:"logs"};function mn(e,t,s,r,o,i){const l=(0,n.up)("center");return(0,n.wg)(),(0,n.iD)("div",{class:(0,u.C_)({popup:!0,active:s.visible})},[(0,n._)("div",{class:"popup-body",onClick:t[4]||(t[4]=(0,a.iM)((()=>{}),["prevent","stop"]))},[s.produit?((0,n.wg)(),(0,n.j4)(l,{key:0},{default:(0,n.w5)((()=>[(0,n._)("h3",null,"Augmenter "+(0,u.zw)(s.produit.nom),1),(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),class:"close"},"×")])),_:1})):(0,n.kq)("",!0),(0,n._)("form",on,[s.produit?((0,n.wg)(),(0,n.iD)("div",ln,[(0,n._)("label",dn,[(0,n.Uk)(" Quantite: "),o.achat.quantite?((0,n.wg)(),(0,n.iD)("span",cn,"("+(0,u.zw)(o.achat.quantite*s.produit.rapport)+" "+(0,u.zw)(s.produit.unite_sortant)+")",1)):(0,n.kq)("",!0)]),(0,n.wy)((0,n._)("input",{type:"text",placeholder:"quantite",id:"id_quantite","onUpdate:modelValue":t[1]||(t[1]=e=>o.achat.quantite=e),autocomplete:"off"},null,512),[[a.nr,o.achat.quantite]])])):(0,n.kq)("",!0),(0,n._)("div",un,[_n,(0,n.wy)((0,n._)("input",{type:"number",placeholder:"Prix d'achat",id:"id_prix","onUpdate:modelValue":t[2]||(t[2]=e=>o.achat.prix=e),autocomplete:"off"},null,512),[[a.nr,o.achat.prix]])]),(0,n._)("div",hn,[(0,n._)("div",pn,(0,u.zw)(o.logs),1),(0,n._)("input",{type:"submit",value:"Acheter",onClick:t[3]||(t[3]=(...e)=>i.acheter&&i.acheter(...e))})])])])],2)}var vn=s(5054);const bn=(0,D.Z)(vn.Z,[["render",mn],["__scopeId","data-v-0f2113b4"]]);var gn=bn;const fn=e=>((0,n.dD)("data-v-0f6555c9"),e=e(),(0,n.Cn)(),e),wn=fn((()=>(0,n._)("h3",null,"Produit",-1))),yn={method:"post"},kn={class:"field"},Cn=fn((()=>(0,n._)("label",{for:"id_nom"},"Nom:",-1))),Dn={class:"field"},$n=fn((()=>(0,n._)("label",{for:"id_unite"},"Unité d'achat:",-1))),xn={class:"field"},qn=fn((()=>(0,n._)("label",{for:"id_sortant"},"Unité de vente:",-1))),Sn={class:"field"},zn=fn((()=>(0,n._)("label",{for:"id_rapport"},"Rapport entre les deux:",-1))),In={class:"submit"},On={class:"logs"};function Un(e,t,s,r,o,i){const l=(0,n.up)("center");return(0,n.wg)(),(0,n.iD)("div",{class:(0,u.C_)({popup:!0,active:s.visible})},[(0,n._)("div",{class:"popup-body",onClick:t[6]||(t[6]=(0,a.iM)((()=>{}),["prevent","stop"]))},[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[wn,(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),class:"close"},"×")])),_:1}),(0,n._)("form",yn,[(0,n._)("div",kn,[Cn,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.nom=e),placeholder:"nom du produit",id:"id_nom"},null,512),[[a.nr,o.nom]])]),(0,n._)("div",Dn,[$n,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>o.unite=e),placeholder:"ex: kg, casier, carton...",id:"id_unite"},null,512),[[a.nr,o.unite]])]),(0,n._)("div",xn,[qn,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>o.sortant=e),placeholder:"ex: kg, pieces, bouteils...",id:"id_sortant"},null,512),[[a.nr,o.sortant]])]),(0,n._)("div",Sn,[zn,(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>o.rapport=e),placeholder:"1 par défaut",id:"id_rapport"},null,512),[[a.nr,o.rapport]])]),(0,n._)("div",In,[(0,n._)("div",On,(0,u.zw)(o.logs),1),(0,n._)("input",{type:"submit",value:"Envoyer",onClick:t[5]||(t[5]=(...e)=>i.submit&&i.submit(...e))})])])])],2)}var Mn={props:{visible:{type:Boolean,default:!1}},data(){return{logs:"",nom:"",unite:"",sortant:"",rapport:"",produit:null}},computed:{host(){return this.$store.state.host}},methods:{close(){this.$emit("close")},submit(){console.log(this.produit),this.produit?this.update():this.create()},create(){let e={nom:this.nom,unite:this.unite,unite_sortant:this.sortant,rapport:this.rapport};c().post(this.host+"/produit/",e,this.headers).then((e=>{this.$store.state.stocks.push(e.data),this.close()})).catch((e=>{e.response?this.logs=e.response.data:(this.logs="erreur inconnu",console.error(e))}))},update(){}}};const jn=(0,D.Z)(Mn,[["render",Un],["__scopeId","data-v-0f6555c9"]]);var Bn=jn,Tn={components:{StockItem:Za,SearchBar:be,OutDialog:nn,InDialog:gn,ProductDialog:Bn},data(){return{stocks:[],out_dialog_opened:!1,in_dialog_opened:!1,product_poped_up:!1,produit:{}}},mounted(){let e=this.$store.state.stocks;if(e.length>0)this.stocks=e;else{let e={headers:{Authorization:"Bearer "+this.$store.state.user.access}};c().get(this.$store.state.host+"/produit/",e).then((e=>{this.$store.state.stocks=e.data,this.stocks=e.data})).catch((e=>{console.error(e)}))}},methods:{close(){this.in_dialog_opened=!1,this.out_dialog_opened=!1,this.produit=null},search(e){this.stocks=[];for(var t=0;t<this.$store.state.stocks.length;t++){let a=this.$store.state.stocks[t];for(let t in a){var s=String(a[t]).toLowerCase();if(s.search(e.toLowerCase())>=0){this.stocks.push(a);break}}}},decreaseStock(e){this.produit=e,this.out_dialog_opened=!0},increaseStock(e){this.produit=e,this.in_dialog_opened=!0}}};const Wn=(0,D.Z)(Tn,[["render",Ba],["__scopeId","data-v-5ddcffba"]]);var An=Wn;const En=e=>((0,n.dD)("data-v-ca6144f8"),e=e(),(0,n.Cn)(),e),Pn={class:"top"},Ln=En((()=>(0,n._)("div",{class:"recycler"},null,-1))),Zn={class:"scrollable-tab"},Vn={class:"table menus"},Nn=En((()=>(0,n._)("thead",null,[(0,n._)("tr",{class:"panier-item"},[(0,n._)("th",null,"id"),(0,n._)("th",null,"menu"),(0,n._)("th",null,"du"),(0,n._)("th",null,"au"),(0,n._)("th",null,"fois"),(0,n._)("th",null,"quantite"),(0,n._)("th",null,"somme")])],-1))),Rn={id:"menus"};function Fn(e,t,s,a,r,o){const i=(0,n.up)("SearchBar"),l=(0,n.up)("DateFilter");return(0,n.wg)(),(0,n.iD)("div",{id:"app",class:"nonprintable",onClick:t[0]||(t[0]=t=>e.popover_opened=!1)},[(0,n._)("div",Pn,[(0,n.Wm)(i,{onChanged:o.search},null,8,["onChanged"]),(0,n.Wm)(l,{onChanged:o.filter},null,8,["onChanged"])]),Ln,(0,n._)("div",Zn,[(0,n._)("table",Vn,[Nn,(0,n._)("tbody",Rn,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.menus,(e=>((0,n.wg)(),(0,n.iD)("tr",null,[(0,n._)("td",null,"#"+(0,u.zw)(e.id),1),(0,n._)("td",null,(0,u.zw)(e.nom),1),(0,n._)("td",null,(0,u.zw)(r.date_du),1),(0,n._)("td",null,(0,u.zw)(r.date_au),1),(0,n._)("td",null,(0,u.zw)(e.fois),1),(0,n._)("td",null,(0,u.zw)(e.quantite),1),(0,n._)("td",null,(0,u.zw)(e.prix),1)])))),256))])])])])}var Kn={components:{SearchBar:be,DateFilter:Hs},data(){return{menus:[],raw_menus:[],date_du:(new Date).toLocaleDateString("fr-CA"),date_au:(new Date).toLocaleDateString("fr-CA")}},mounted(){let e=this.$store.state.stats.menu;e.length>0?(this.menus=e,this.raw_menus=e):this.fetchData()},methods:{search(e){this.menus=[];for(var t=0;t<this.raw_menus.length;t++){let a=this.raw_menus[t];for(let t in a){var s=String(a[t]).toLowerCase();if(s.search(e.toLowerCase())>=0){this.menus.push(a);break}}}},filter(e){let t=new Date(e.du).toISOString(),s=new Date(e.au).toISOString();c().get(`${this.host}/detail_commande/stats/?date__range=${t},${s}`,this.headers).then((e=>{this.menus=e.data,this.raw_menus=e.data,this.date_du=dates_du,this.date_au=dates_du})).catch((e=>{console.error(e)}))},fetchData(){c().get(this.$store.state.host+"/detail_commande/stats/",this.headers).then((e=>{this.$store.state.stats.menu=e.data,this.menus=e.data,this.raw_menus=e.data})).catch((e=>{this.displayErrorOrRefreshToken(e,fetchData)}))}}};const Qn=(0,D.Z)(Kn,[["render",Fn],["__scopeId","data-v-ca6144f8"]]);var Yn=Qn;const Hn=e=>((0,n.dD)("data-v-3c1da653"),e=e(),(0,n.Cn)(),e),Jn={class:"top"},Xn=Hn((()=>(0,n._)("div",{class:"recycler"},null,-1))),Gn={class:"scrollable-tab"},er={class:"table services"},tr=Hn((()=>(0,n._)("thead",null,[(0,n._)("tr",{class:"panier-item"},[(0,n._)("th",null,"id"),(0,n._)("th",null,"serveur"),(0,n._)("th",null,"du"),(0,n._)("th",null,"au"),(0,n._)("th",null,"fois"),(0,n._)("th",null,"montant"),(0,n._)("th",null,"payee")])],-1))),sr={id:"services"};function ar(e,t,s,a,r,o){const i=(0,n.up)("SearchBar"),l=(0,n.up)("DateFilter");return(0,n.wg)(),(0,n.iD)("div",{id:"app",class:"nonprintable",onClick:t[0]||(t[0]=t=>e.popover_opened=!1)},[(0,n._)("div",Jn,[(0,n.Wm)(i,{onChanged:o.search},null,8,["onChanged"]),(0,n.Wm)(l,{onChanged:o.filter},null,8,["onChanged"])]),Xn,(0,n._)("div",Gn,[(0,n._)("table",er,[tr,(0,n._)("tbody",sr,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.services,(e=>((0,n.wg)(),(0,n.iD)("tr",null,[(0,n._)("td",null,"#"+(0,u.zw)(e.id),1),(0,n._)("td",null,(0,u.zw)(e.nom+" "+e.prenom),1),(0,n._)("td",null,(0,u.zw)(r.date_du),1),(0,n._)("td",null,(0,u.zw)(r.date_au),1),(0,n._)("td",null,(0,u.zw)(e.fois),1),(0,n._)("td",null,(0,u.zw)(e.prix),1),(0,n._)("td",null,(0,u.zw)(e.payee),1)])))),256))])])])])}var nr={components:{SearchBar:be,DateFilter:Hs},data(){return{services:[],raw_services:[],date_du:(new Date).toLocaleDateString("fr-CA"),date_au:(new Date).toLocaleDateString("fr-CA")}},mounted(){let e=this.$store.state.stats.service;e.length>0?(this.services=e,this.raw_services=e):c().get(this.$store.state.host+"/commande/stats/",this.headers).then((e=>{this.$store.state.stats.service=e.data,this.services=e.data,this.raw_services=e.data})).catch((e=>{console.error(e)}))},methods:{search(e){this.services=[];for(var t=0;t<this.raw_services.length;t++){let a=this.raw_services[t];for(let t in a){var s=String(a[t]).toLowerCase();if(s.search(e.toLowerCase())>=0){this.services.push(a);break}}}},filter(e){let t=new Date(e.du).toISOString(),s=new Date(e.au).toISOString();c().get(`${this.$store.state.host}/commande/stats/?date__range=${t},${s}`,this.headers).then((e=>{this.services=e.data,this.raw_services=e.data,this.date_du=t,this.date_au=s})).catch((e=>{console.error(e)}))}}};const rr=(0,D.Z)(nr,[["render",ar],["__scopeId","data-v-3c1da653"]]);var or=rr;const ir=[{path:"",component:Le,name:"tables"},{path:"/serveurs",component:gt,name:"serveurs"},{path:"/menus",component:gs,name:"menus"},{path:"/commandes/",component:Oa,name:"commandes"},{path:"/stock/",component:An,name:"stock"},{path:"/stat_menu/",component:Yn,name:"stat_menu"},{path:"/stat_service/",component:or,name:"stat_service"}],lr=(0,de.p7)({history:(0,de.PO)(),routes:ir});var dr=lr,cr=s(3907),ur=(0,cr.MT)({state:{user:null,serveurs:[],recettes:[],tables:[],commandes:[],commande:null,stats:{menu:[],service:[]},stocks:[],host:"/api",selected_serveur:null,selected_table:null,cart:new Object({content:[],getTotal(){let e=0;for(let t=0;t<this.content.length;t++)e+=this.content[t].getTotal();return e},getLength(){return this.content.length},find(e){for(let t=0;t<this.content.length;t++){let s=this.content[t];if(s.recette.id==e)return t}return-1},getQuantite(e){let t=this.find(e);return t>=0?this.content[t].quantite:0},increase(e){let t=this.find(e);t>=0&&this.content[t].quantite++},decrease(e){let t=this.find(e);if(t>=0){let e=this.content[t];e.quantite>0?e.quantite--:this.content.splice(t,1)}},add(e){let t=this.find(e.id);if(t>=0)this.increase(e.id);else{let t=new Object({recette:e,quantite:1,getTotal(){return this.recette.prix*this.quantite}});this.content.push(t)}}})},mutations:{},actions:{},getters:{}}),_r=(s(6229),s(7330),s(2062),{computed:{headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access}}},host(){return this.$store.state.host}},methods:{cleanString(e){if(!e)return"";if("object"==typeof e){let t="";for(let[s,a]of Object.entries(e)){if("object"==typeof a){let e="";for(let[t,s]of Object.entries(a))e+=`- ${t}: ${s}<br>`;a=e}t+=`${s}: ${a}<br>`}return t}return e=e.toString(),e.replace(/(<([^>]+)>)/gi,"")},money(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):0},datetime(e){let t=new Date(e);return new Intl.DateTimeFormat("en-GB",{dateStyle:"short",timeStyle:"short"}).format(t)},compress(e,t,s){let a=new FileReader;a.readAsDataURL(e),a.onload=function(a){let n=new Image;n.src=URL.createObjectURL(e),n.onload=function(){let a=document.createElement("canvas"),r=n.width/t;a.width=t,a.height=n.height/r;let o=a.getContext("2d");o.drawImage(n,0,0,a.width,a.height);let i=o.canvas.toDataURL(n,e.type);s(new File([i],e.name)),URL.revokeObjectURL(e)}}},displayErrorOrRefreshToken(e,t){if(e.response)if("token_not_valid"==e.response.data.code){let e=this.$store.state.user.refresh;if(!e)return void(this.$store.state.user=null);axios.post(this.url+"/refresh/",{refresh:e}).then((e=>{this.$store.state.user.access=e.data.access,"function"==typeof t&&t()})).catch((e=>{console.error(e),this.displayNotification(e),this.$store.state.user=null}))}else this.displayNotification(e)},displayNotification(e){if("granted"===Notification.permission){new Notification(this.cleanString(e.response.data).replaceAll("<br>",""))}else"denied"!==Notification.permission&&Notification.requestPermission().then((t=>{if("granted"===t){new Notification(this.cleanString(e.response.data).replaceAll("<br>",""))}}))}}});window.axios=c(),(0,a.ri)(le).mixin(_r).use(ur).use(dr).mount("#app")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(t,s,a,n){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],n=e[d][2];for(var o=!0,i=0;i<s.length;i++)(!1&n||r>=n)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](s[i])}))?s.splice(i--,1):(o=!1,n<r&&(r=n));if(o){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,a,n]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,n,r=s[0],o=s[1],i=s[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)__webpack_require__.o(o,a)&&(__webpack_require__.m[a]=o[a]);if(i)var d=i(__webpack_require__)}for(t&&t(s);l<r.length;l++)n=r[l],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return __webpack_require__.O(d)},s=self["webpackChunkubunywero"]=self["webpackChunkubunywero"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(1021)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.js.map